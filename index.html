<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FR-Alerte PWA</title>
<link rel="manifest" href="manifest.json">
</head>
<body>
<h1>FR-Alerte PWA</h1>
<p>Notifications prêtes à recevoir les alertes</p>
<audio id="alerteSound" src="sounds/alerte1.mp3"></audio>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-messaging-compat.js"></script>
<script>
  // Configuration Firebase
  const firebaseConfig = {
    apiKey: "VOTRE_API_KEY",
    authDomain: "VOTRE_PROJET.firebaseapp.com",
    projectId: "VOTRE_PROJET",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  firebase.initializeApp(firebaseConfig);

  const messaging = firebase.messaging();

  // Demander permission pour notifications
  Notification.requestPermission().then(permission => {
    if(permission === 'granted'){
      messaging.getToken().then(token => {
        console.log("Token FCM du téléphone :", token);
      });
    }
  });

  // Notifications reçues quand la PWA est ouverte
  messaging.onMessage(payload => {
    console.log('Message reçu:', payload);
    document.getElementById('alerteSound').play();
    new Notification(payload.notification.title, { body: payload.notification.body });
  });
</script>
</body>
</html>
